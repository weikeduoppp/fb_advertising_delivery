(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"3EeK":function(e,a,t){},aArQ:function(e,a,t){"use strict";t.r(a);var n=t("q1tI"),o=t.n(n),s=t("/MKj"),l=t("bKel"),c=t.n(l),r=(t("lUTK"),t("BvKs")),i=(t("Pwec"),t("CtXQ")),p=(t("B9cy"),t("Ol7k")),d=t("lzUu"),m=t.n(d),g=t("wY1l"),u=t.n(g),_=t("d6i3"),h=t.n(_),y=t("1l/V"),v=t.n(y),b=(t("miYZ"),t("tsqr")),f=t("Aeqt"),E=t("pGep"),k=t("3EeK"),w=t.n(k),x=(t("T2oS"),t("W9HT")),N=(t("qVdP"),t("jsC+")),C=(t("Telt"),t("Tckk")),S=(t("OaEy"),t("2fM7")),I=t("h3zL"),L=t.n(I),F=S["a"].Option;class T extends n["PureComponent"]{constructor(){super(...arguments),this.onChange=(e=>{this.props.onChange(e)})}render(){var e=this.props,a=e.currentUser,t=void 0===a?{}:a,n=e.onMenuClick,s=e.options,l=e.adaccount_id,c=o.a.createElement(r["a"],{className:L.a.menu,selectedKeys:[],onClick:n},o.a.createElement(r["a"].Item,{key:"resetLogin"},o.a.createElement(i["a"],{type:"close-circle"}),"Facebook\u767b\u5f55"),o.a.createElement(r["a"].Divider,null),o.a.createElement(r["a"].Item,{key:"getNewAdaccounts"},o.a.createElement(i["a"],{type:"logout"}),"\u83b7\u53d6\u5e7f\u544a\u8d26\u6237"));return o.a.createElement("div",{className:L.a.header+" clearfix"},o.a.createElement("div",{className:L.a.left},o.a.createElement(S["a"],{showSearch:!0,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u5e7f\u544a\u8d26\u6237",optionFilterProp:"children",onChange:this.onChange,value:l||void 0,filterOption:(e,a)=>a.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},s.map((e,a)=>o.a.createElement(F,{key:e.id,value:e.id},e.name+"-"+e.id)))),o.a.createElement("div",{className:L.a.right},t.name?o.a.createElement(N["a"],{overlay:c},o.a.createElement("span",{className:"".concat(L.a.action," ").concat(L.a.account)},o.a.createElement(C["a"],{size:"small",className:L.a.avatar,src:t.avatar}),o.a.createElement("span",{className:L.a.name},t.name))):o.a.createElement(x["a"],{size:"small",style:{marginLeft:8}})))}}var U=t("fBUP");class A extends n["Component"]{constructor(){var e;super(...arguments),e=this,this.state={name:"\u5c1a\u672a\u767b\u5f55",avatar:"https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png"},this.onFBReady=(()=>{this.FbLogin()}),this.resetLogin=(()=>{localStorage.getItem("access_token")&&localStorage.removeItem("access_token"),this.FbLogin()}),this.logout=(()=>{window.FB.logout(function(e){console.log(e),b["a"].info("\u9000\u51fa\u6210\u529f"),this.setState({name:"\u5c1a\u672a\u767b\u5f55",avatar:"https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png"})})}),this.getNewAdaccounts=v()(h.a.mark(function a(){var t,n;return h.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return t=e.props.dispatch,a.next=3,E["getAdaccounts"]();case 3:n=a.sent,t({type:"global/set_options",payload:n}),localStorage.setItem("options",JSON.stringify(n)),b["a"].success("\u5e7f\u544a\u8d26\u6237\u83b7\u53d6\u6210\u529f");case 7:case"end":return a.stop()}},a)}))}componentDidMount(){window.FB?this.onFBReady():(Object(f["c"])(),window.addEventListener("fb-sdk-ready",this.onFBReady))}componentWillUnmount(){window.removeEventListener("fb-sdk-ready",this.onFBReady)}FbLogin(){var e=this,a=this.props.dispatch,t=this.getStorage(),n=t.access_token,o=t.options;n?(this.getUser(),0===o.length?this.getNewAdaccounts():a({type:"global/set_options",payload:o})):window.FB.login(function(){var a=v()(h.a.mark(function a(t){var n;return h.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:console.log(t),t.authResponse?(n=t.authResponse.accessToken,b["a"].info("\u5df2\u6210\u529f\u767b\u5f55"),localStorage.setItem("access_token",n),e.getLongToken(n),e.getUser(),e.getNewAdaccounts()):b["a"].info("\u8bf7\u60a8\u5148\u767b\u5f55facebook");case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),{scope:"ads_read,ads_management,manage_pages,instagram_basic"})}getLongToken(e){Object(U["a"])({url:"".concat(f["d"],"/api/token"),method:"GET",params:{accessToken:e},success(e){1===e.status&&localStorage.setItem("access_token",e.access_token)}})}getUser(){var e=this;return v()(h.a.mark(function a(){var t,n,o,s,l,c,r;return h.a.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(t=e.props,n=t.global_name,o=t.global_avatar,s=t.dispatch,n||o){a.next=12;break}return a.next=4,E["getUser"]();case 4:l=a.sent,c=l.name,r=l.avatar,s({type:"global/set_name",payload:c}),s({type:"global/set_avatar",payload:r}),e.setState({name:c,avatar:r}),a.next=13;break;case 12:e.setState({name:n,avatar:o});case 13:case"end":return a.stop()}},a)}))()}getStorage(){return this.props.dispatch({type:"global/set_adaccount_id",payload:localStorage.getItem("adaccount_id")}),{access_token:localStorage.getItem("access_token"),options:JSON.parse(localStorage.getItem("options"))}}clearCache(){var e=this.props.dispatch;e({type:"global/set_adimages_cache",payload:null}),e({type:"global/set_advideos_cache",payload:null}),e({type:"global/set_adimages",payload:[]}),e({type:"global/set_advideos",payload:[]}),e({type:"global/set_pixcel_id",payload:null}),e({type:"global/set_application",payload:null}),e({type:"global/set_pages_cache",payload:null}),e({type:"global/set_campaigns",payload:[]}),e({type:"global/set_adsets",payload:[]}),e({type:"global/set_ads",payload:[]}),e({type:"global/set_images",payload:[]}),e({type:"global/set_videos",payload:[]}),e({type:"global/set_campaigns_cache",payload:{isFetch:!0,data:[]}}),e({type:"global/set_instagram_accounts_cache",payload:null})}render(){var e=this.props,a=e.dispatch,t=e.options,n=e.adaccount_id;return o.a.createElement("div",{className:w.a.face_container},o.a.createElement(T,{currentUser:{name:this.state.name,avatar:this.state.avatar,userid:"00000001",notifyCount:12},onMenuClick:e=>{this[e.key]()},options:t,adaccount_id:n,onChange:e=>{localStorage.setItem("adaccount_id",e),n!==e&&this.clearCache(),a({type:"global/set_adaccount_id",payload:e})}}))}}var B=e=>{return{options:e.global.options,adaccount_id:e.global.adaccount_id,global_name:e.global.name,global_avatar:e.global.avatar}},z=Object(s["c"])(B)(A),O=p["a"].Header,j=p["a"].Content,K=p["a"].Footer,R=p["a"].Sider,M=e=>{var a=e.header,t=e.children,n=e.pathname,s=void 0===n?"/campaign":n;return o.a.createElement(p["a"],{className:m.a.layout},o.a.createElement(R,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},o.a.createElement("div",{className:m.a.logo},o.a.createElement(u.a,{className:m.a.logo_title,to:"/"},a)),o.a.createElement(r["a"],{theme:"dark",mode:"inline",defaultSelectedKeys:["/campaign"],selectedKeys:[s]},o.a.createElement(r["a"].Item,{key:"/campaign"},o.a.createElement(i["a"],{type:"credit-card"}),o.a.createElement(u.a,{to:"/campaign",className:"nav-text"},"Campaign")),o.a.createElement(r["a"].Item,{key:"/adset"},o.a.createElement(i["a"],{type:"appstore"}),o.a.createElement(u.a,{to:"/adset",className:"nav-text"},"Adset")),o.a.createElement(r["a"].Item,{key:"/ad"},o.a.createElement(i["a"],{type:"block"}),o.a.createElement(u.a,{to:"/ad",className:"nav-text"},"Ads")))),o.a.createElement(p["a"],{style:{marginLeft:200}},o.a.createElement(O,{style:{background:"#fff",padding:0}},o.a.createElement(z,null)),o.a.createElement(j,{style:{margin:"24px 16px 0"}},o.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},t)),o.a.createElement(K,{style:{textAlign:"center"}},"2020")))};function P(e){var a=e.children,t=(e.count,e.location.pathname);return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{header:"\u5e7f\u544a\u6295\u653e\u5de5\u5177",children:a,pathname:t}))}var q=e=>{return{count:e.global.count}};a["default"]=c()(Object(s["c"])(q)(P))},h3zL:function(e,a,t){e.exports={header:"header___2qNXU",left:"left___3YQ-8",logo:"logo___3cSCa",menu:"menu___1AAY4",trigger:"trigger___1UTVR",right:"right___3mIQz",action:"action___iM304",search:"search___1IdPY",account:"account___CujuH",avatar:"avatar___TyeCi",name:"name___3n2gT"}},lzUu:function(e,a,t){e.exports={logo:"logo___1vG35",logo_title:"logo_title___1LGLF"}}}]);