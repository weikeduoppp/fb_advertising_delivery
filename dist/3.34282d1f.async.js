(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{Kdrr:function(e,t,a){e.exports={next_btn:"next_btn___2HuSX",content:"content___3ClNS"}},endv:function(e,t,a){"use strict";a.r(t);a("+L6B");var n=a("2/Rp"),r=(a("miYZ"),a("tsqr")),c=(a("T2oS"),a("W9HT")),i=a("qIgq"),s=a.n(i),u=(a("Znn+"),a("ZTPi")),l=a("q1tI"),d=a.n(l),o=a("hQyA"),p=a("4/LA"),m=a("DPwR"),b=a("MrYu"),_=a("Kdrr"),y=a.n(_),f=a("/MKj"),v=a("p0pE"),g=a.n(v),h=a("d6i3"),k=a.n(h),w=(a("/xke"),a("TeRw")),x=a("1l/V"),j=a.n(x),E=a("pGep"),O=a("7Qib"),S=a("3a4m"),C=a.n(S),R=d.a.memo(e=>{var t=e.setLoading,a=e.adaccount_id,c=e.campaignState,i=e.adsCreativeState,s=e.adsetState,u=e.images;function l(){return c.objective===o["a"]?p(s.promoted_object.object_store_url,i):p(i.link,i)}function p(e,t){return _.apply(this,arguments)}function _(){return _=j()(k.a.mark(function e(t,n){var r,c;return k.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=s.is_dynamic_creative,e.next=3,E["createAdCreative"](a,r?Object(b["a"])(t,n,u):Object(m["b"])(t,n));case 3:if(c=e.sent,c.error){e.next=8;break}return e.abrupt("return",c.id);case 8:w["a"].error({message:"\u521b\u5efa\u5e7f\u544a\u521b\u610f\u5931\u8d25",description:"".concat(c.error.error_user_msg),duration:null});case 9:case"end":return e.stop()}},e)})),_.apply(this,arguments)}function y(){return f.apply(this,arguments)}function f(){return f=j()(k.a.mark(function e(){var t;return k.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(c.name){e.next=2;break}return e.abrupt("return",r["a"].warning("\u8bf7\u8f93\u5165\u5e7f\u544a\u7cfb\u5217\u540d\u79f0 !"));case 2:return e.next=4,E["createCampaign"](a,g()({},Object(O["c"])(c)));case 4:if(t=e.sent,!t.id){e.next=7;break}return e.abrupt("return",t.id);case 7:case"end":return e.stop()}},e)})),f.apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return h=j()(k.a.mark(function e(t){var n,c,i;return k.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s.name){e.next=2;break}return e.abrupt("return",r["a"].warning("\u8bf7\u8f93\u5165\u5e7f\u544a\u7ec4\u540d\u79f0 !"));case 2:return n=Object(O["c"])(s),n.start_time&&(n.start_time=parseInt(n.start_time/1e3)),n.end_time&&(n.end_time=parseInt(n.end_time/1e3)),e.next=7,E["createAdset"](a,g()({campaign_id:t},n));case 7:return c=e.sent,i=c.id,e.abrupt("return",i);case 10:case"end":return e.stop()}},e)})),h.apply(this,arguments)}function x(e,t){return S.apply(this,arguments)}function S(){return S=j()(k.a.mark(function e(t,n){var r,c;return k.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E["createAds"](a,{adset_id:t,name:i.ads_name,creative:{creative_id:n},status:i.status});case 2:return r=e.sent,c=r.id,e.abrupt("return",c);case 5:case"end":return e.stop()}},e)})),S.apply(this,arguments)}function R(){return T.apply(this,arguments)}function T(){return T=j()(k.a.mark(function e(){var a,n,i,u;return k.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t(!0),setTimeout(()=>{t(!1),C.a.replace("/campaign")},1e3),!c.id){e.next=6;break}e.t0=c.id,e.next=9;break;case 6:return e.next=8,y();case 8:e.t0=e.sent;case 9:if(a=e.t0,!s.id){e.next=14;break}e.t1=s.id,e.next=17;break;case 14:return e.next=16,v(a);case 16:e.t1=e.sent;case 17:return n=e.t1,e.next=20,l();case 20:return i=e.sent,e.next=23,x(n,i);case 23:u=e.sent,u&&r["a"].success("\u521b\u5efa\u5e7f\u544a\u6210\u529f");case 25:case"end":return e.stop()}},e)})),T.apply(this,arguments)}return d.a.createElement(n["a"],{type:"primary",onClick:R},"\u786e\u8ba4")}),T=(e,t)=>{return{images:e.global.images}},z=Object(f["c"])(T)(R),P=Object(l["lazy"])(()=>Promise.all([a.e(0),a.e(8)]).then(a.bind(null,"OIcR"))),A=Object(l["lazy"])(()=>Promise.all([a.e(0),a.e(9)]).then(a.bind(null,"4AHE"))),N=Object(l["lazy"])(()=>Promise.all([a.e(0),a.e(7)]).then(a.bind(null,"lYTh"))),I=u["a"].TabPane,q=e=>{var t=e.adaccount_id,a=e.dispatch,i=Object(l["useState"])(!1),_=s()(i,2),f=_[0],v=_[1],g=Object(l["useState"])("campaign"),h=s()(g,2),k=h[0],w=h[1],x=Object(l["useReducer"])(o["d"],o["b"]),j=s()(x,2),E=j[0],O=j[1],S=Object(l["useReducer"])(p["c"],p["b"][E.objective]),C=s()(S,2),R=C[0],T=C[1],q=Object(l["useReducer"])(m["d"],m["c"]),K=s()(q,2),L=K[0],H=K[1],Y=Object(l["useReducer"])(b["c"],b["b"]),Z=s()(Y,2),D=Z[0],J=Z[1];function M(){a({type:"global/set_c_campaign",payload:E})}function Q(){a({type:"global/set_c_adset",payload:R})}return Object(l["useEffect"])(()=>{return document.onkeydown&&(document.onkeydown=null),()=>{document.onkeydown=null}},[]),d.a.createElement(c["a"],{tip:"\u52aa\u529b\u521b\u5efa\u4e2d...",spinning:f,size:"large",delay:500},d.a.createElement(u["a"],{className:y.a.content,tabPosition:"left",activeKey:k,onTabClick:e=>{w(e)}},d.a.createElement(I,{className:y.a.campaign,tab:"\u5e7f\u544a\u7cfb\u5217",key:"campaign"},d.a.createElement(l["Suspense"],{fallback:d.a.createElement(c["a"],{size:"small"})},d.a.createElement(A,{adaccount_id:t,state:E,campaignDispatch:O,initailState:o["b"],setStep:w}),d.a.createElement("div",{className:y.a.next_btn},d.a.createElement(n["a"],{type:"primary",onClick:()=>{E.name?(w("adset"),M()):r["a"].warning("\u8bf7\u8f93\u5165\u5e7f\u544a\u7cfb\u5217\u540d\u79f0")}},"\u7ee7\u7eed")))),d.a.createElement(I,{tab:"\u5e7f\u544a\u7ec4",key:"adset"},d.a.createElement(l["Suspense"],{fallback:d.a.createElement(c["a"],{size:"small"})},d.a.createElement(P,{campaign_id:E.id,bid_strategy:E.bid_strategy,daily_budget:E.daily_budget,state:R,dispatch:T,initailState:p["b"][E.objective],objective:E.objective}),d.a.createElement("div",{className:y.a.next_btn},d.a.createElement(n["a"],{type:"primary",onClick:()=>{R.name?(w("ads"),Q()):r["a"].warning("\u8bf7\u8f93\u5165\u5e7f\u544a\u7ec4\u540d\u79f0")}},"\u7ee7\u7eed")))),d.a.createElement(I,{tab:"\u5e7f\u544a",key:"ads"},d.a.createElement(l["Suspense"],{fallback:d.a.createElement(c["a"],{size:"small"})},d.a.createElement(N,{state:R.is_dynamic_creative?D:L,dispatch:R.is_dynamic_creative?J:H,objective:E.objective,is_dynamic_creative:R.is_dynamic_creative}),d.a.createElement("div",{className:y.a.next_btn},d.a.createElement(z,{setLoading:v,adaccount_id:t,campaignState:E,adsetState:R,adsCreativeState:R.is_dynamic_creative?D:L}))))))},K=(e,t)=>{return{adaccount_id:e.global.adaccount_id}};t["default"]=Object(f["c"])(K)(q)}}]);